id: org.lyx.LyX.Plugin.SweaveKnitr
runtime: org.lyx.LyX
runtime-version: stable
sdk: org.kde.Sdk//5.15-23.08
build-extension: true
appstream-compose: false
build-options:
  prefix: /app/plugins/SweaveKnitr
  prepend-path: /app/plugins/SweaveKnitr/bin
  prepend-ld-library-path: /app/plugins/SweaveKnitr/lib
  prepend-pkg-config-path: /app/plugins/SweaveKnitr/lib/pkgconfig
modules:
  - name: R
    buildsystem: autotools
    sources:
      - type: archive
        url: https://mirror.las.iastate.edu/CRAN/src/base/R-4/R-4.3.3.tar.gz
        sha256: 80851231393b85bf3877ee9e39b282e750ed864c5ec60cbd68e6e139f0520330
  - name: knitr
    buildsystem: simple
    build-commands:
      - R -e "install.packages('evaluate_0.23.tar.gz', repos = NULL, type = 'source')"
      - R -e "install.packages('xfun_0.41.tar.gz', repos = NULL, type = 'source')"
      - R -e "install.packages('highr_0.10.tar.gz', repos = NULL, type = 'source')"
      - R -e "install.packages('yaml_2.3.8.tar.gz', repos = NULL, type = 'source')"
      - R -e "install.packages('knitr_1.45.tar.gz', repos = NULL, type = 'source')"
    post-install: 
      - install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo ${FLATPAK_ID}.metainfo.xml
      - appstream-compose --basename=${FLATPAK_ID} --prefix=${FLATPAK_DEST} --origin=flatpak
        ${FLATPAK_ID}
    sources:
      - type: file
        url: https://cran.r-project.org/src/contrib/knitr_1.46.tar.gz
        sha256: 8f51c33c93a8c1a87ca618c9254372d9407948707e544d0d796c6b960e9fe859
      - type: file
        url: https://cran.r-project.org/src/contrib/evaluate_0.23.tar.gz
        sha256: c9cf9c37502b8fbfa78e4eb96b8c3d1789060e49505c86c07cb7476da804a45c
      - type: file
        url: https://cran.r-project.org/src/contrib/highr_0.10.tar.gz
        sha256: ec55bc1ff66390ed66806dc2a7b6c17dbfd089b3d73fe2e369017f8cb4bc347b
      - type: file
        url: https://cran.r-project.org/src/contrib/xfun_0.43.tar.gz
        sha256: 59ad462a52ed6fca01647807f8108f0c47769744f958a766a85282d9494e16c3
      - type: file
        url: https://cran.r-project.org/src/contrib/yaml_2.3.8.tar.gz
        sha256: 9ed079e2159cae214f3fefcbc4c8eb3b888ceabe902350adbdb1d181eda23fd8
      - type: file
        path: org.lyx.LyX.Plugin.SweaveKnitr.metainfo.xml
